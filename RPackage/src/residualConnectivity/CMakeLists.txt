cmake_minimum_required(VERSION 3.1)
set(CppFiles loadQt.cpp register.cpp crudeMC_igraph.cpp igraphInterface.cpp graphNELInterface.cpp crudeMC_graphNEL.cpp crudeMC_graphAM.cpp graphAMInterface.cpp countConnectedSubgraphs_igraph.cpp countConnectedSubgraphs_graphNEL.cpp countConnectedSubgraphs_graphAM.cpp stochasticEnumeration.cpp)
set(HeaderFiles loadQt.h crudeMCInterfaces.h igraphInterface.h graphNELInterface.h graphAMInterface.h countConnectedSubgraphsInterfaces.h stochasticEnumeration.h )
add_library(residualConnectivityRPackage SHARED ${CppFiles} ${HeaderFiles})
target_link_libraries(residualConnectivityRPackage PUBLIC residualConnectivityCommon Rcpp crudeMCLib conditionalMCLib exhaustiveSearchLib stochasticEnumerationLib)
set_target_properties(residualConnectivityRPackage PROPERTIES OUTPUT_NAME "residualConnectivity")

if(BUILD_VISUALISATION)
	target_link_libraries(residualConnectivityRPackage PUBLIC Qt5::Core Qt5::Gui Qt5::Widgets ${IGRAPH_LIBRARIES})
endif()
if(WIN32)
	target_compile_definitions(residualConnectivityRPackage PUBLIC _CRT_SECURE_NO_WARNINGS)
	target_link_libraries(residualConnectivityRPackage PRIVATE "${CMAKE_BINARY_DIR}/RPackage/R.lib")
	set_target_properties(residualConnectivityRPackage PROPERTIES RUNTIME_OUTPUT_DIRECTORY_DEBUG ${CMAKE_BINARY_DIR}/RPackage/Debug/inst/libs/x64 PDB_OUTPUT_DIRECTORY_DEBUG ${CMAKE_BINARY_DIR}/RPackage/inst/libs/x64)
	set_target_properties(residualConnectivityRPackage PROPERTIES RUNTIME_OUTPUT_DIRECTORY_RELEASE ${CMAKE_BINARY_DIR}/RPackage/Release/inst/libs/x64 PDB_OUTPUT_DIRECTORY_RELEASE ${CMAKE_BINARY_DIR}/RPackage/Release/inst/libs/x64)
else()
	set_target_properties(residualConnectivityRPackage PROPERTIES LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/RPackage/src)
	set_target_properties(residualConnectivityRPackage PROPERTIES PREFIX "")
endif()
