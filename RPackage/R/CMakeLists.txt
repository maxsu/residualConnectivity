set(RFILES conditionalMC.R crudeMC.R exactRCR.R exhaustiveSearch.R exhaustiveSubgraphs.R onLoad.R simpleMC.R)

#Get location of Rcpp_exceptions.R
get_property(RCPP_INCLUDE_DIRECTORIES TARGET Rcpp PROPERTY INTERFACE_INCLUDE_DIRECTORIES)
foreach(RCPP_INCLUDE_DIRECTORY IN LISTS RCPP_INCLUDE_DIRECTORIES)
	if(EXISTS ${RCPP_INCLUDE_DIRECTORY}/Rcpp_exceptions.R)
		set(RCPP_EXCEPTIONS ${RCPP_INCLUDE_DIRECTORY}/Rcpp_exceptions.R)
	endif()
endforeach()

add_custom_target(copyR ALL)
if(WIN32)
	foreach(BUILD_TYPE IN LISTS CMAKE_CONFIGURATION_TYPES)
		foreach(RFILE IN LISTS RFILES)
			add_custom_command(TARGET copyR COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_CURRENT_SOURCE_DIR}/${RFILE} ${CMAKE_BINARY_DIR}/RPackage/${BUILD_TYPE}/R/${RFILE})
		endforeach()
		add_custom_command(TARGET copyR COMMAND ${CMAKE_COMMAND} -E copy ${RCPP_EXCEPTIONS} ${CMAKE_BINARY_DIR}/RPackage/${BUILD_TYPE}/R/Rcpp_exceptions.R)
	endforeach()
else()
	foreach(RFILE IN LISTS RFILES)
		add_custom_command(TARGET copyR COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_CURRENT_SOURCE_DIR}/${RFILE} ${CMAKE_BINARY_DIR}/RPackage/R/${RFILE})
	endforeach()
	add_custom_command(TARGET copyR POST_BUILD COMMAND ${CMAKE_COMMAND} ARGS -E copy ${RCPP_EXCEPTIONS} ${CMAKE_BINARY_DIR}/RPackage/R/Rcpp_exceptions.R)
endif()
